{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://project-k.mydns.jp/safi/schemas/schedef.schema.json",
    "title": "Schedef",
    "description": "Definition for Job scheduling.",
    "type": "object",
    "properties": {
        "id": {
            "description": "Schedule definition id.",
            "type": "string",
            "minLength": 1,
            "maxLength": 36
        },
        "jobdefId": {
            "description": "Job definition id.",
            "type": "string",
            "minLength": 1,
            "maxLength": 36
        },
        "validityPeriod": {
            "description": "Validity period.",
            "$ref": "https://project-k.mydns.jp/safi/schemas/validity-period.schema.json"
        },
        "priority": {
            "description": "Scheduling priority. The larger the number, the higher the priority.",
            "type": "string",
            "minLength": 1,
            "maxLength": 1
        },
        "name": {
            "description": "Schedule definition name.",
            "type": "string",
            "maxLength": 250
        },
        "trigger": {
            "description": "Schedule trigger configuration.",
            "type": "object",
            "properties": {
                "kind": {
                    "description": "Schedule definition kind.",
                    "type": "string",
                    "enum": ["DAYS", "WEEKDAYS", "ONCE", "CANCEL"]
                },
                "duration": {
                    "description": "Schedule duration.",
                    "type": "string",
                    "format": "duration"
                },
                "months": {
                    "description": "Target month of scheduling.",
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 12
                },
                "weeks": {
                    "description": "Target weeks of scheduling.",
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 5
                },
                "weekDays": {
                    "description": "Target weekDays of scheduling.",
                    "type": "string",
                    "enum": ["SUNDAY", "MONDAY", "TUESDAY", "WEDNESDAY", "THURSDAY", "FRIDAY", "SATURDAY"]
                },
                "days": {
                    "description": "Target days of scheduling.",
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 31
                },
                "anchorTime": {
                    "description": "Anchor time of scheduling.",
                    "type": "string",
                    "format": "date-time"
                }
            },
            "required": [
                "type"
            ],

            "if": {
                "properties": {
                    "type": {
                        "const": "DAILY"
                    }
                }
            },
            "then": {
                "required": ["anchorTime"],
                "not": {
                    "required": ["duration", "months", "weeks", "weekDays", "days"]
                }
            },
            "if": {
                "properties": {
                    "type": {
                        "const": "WEEKLY"
                    }
                }
            },
            "then": {
                "required": ["weekDays", "anchorTime"],
                "not": {
                    "required": ["duration", "months", "weeks", "days"]
                }
            },
            "if": {
                "properties": {
                    "type": {
                        "const": "MONTHLY_DAYS"
                    }
                }
            },
            "then": {
                "required": ["months", "days"],
                "not": {
                    "required": ["duration", "weeks", "weekDays", "anchorTime"]
                }
            },
            "if": {
                "properties": {
                    "type": {
                        "const": "MONTHLY_WEEKDAYS"
                    }
                }
            },
            "then": {
                "required": ["months", "weeks", "weekDays", "anchorTime"],
                "not": {
                    "required": ["duration", "days"]
                }
            },
            "if": {
                "properties": {
                    "type": {
                        "const": "ONCE"
                    }
                }
            },
            "then": {
                "required": ["anchorTime"],
                "not": {
                    "required": ["duration", "months", "weeks", "weekDays", "days"]
                }
            },
            "else": {
                "required": ["anchorTime", "duration"],
                "not": {
                    "required": ["months", "weeks", "weekDays", "days"]
                }
            }
        },
        "note": {
            "description": "Note of this value.",
            "type": "string"
        },
        "version": {
            "description": "Entity version stored in database. 0 if not yet stored.",
            "type": "integer",
            "minimum": 0
        },
        "registerTime": {
            "description": "Registered time. This value for reference only, setting it does not persist the value.",
            "type": "string",
            "format": "date-time"
        },
        "registerAccountId": {
            "description": "Registered account id. This value for reference only, setting it does not persist the value.",
            "type": "string",
            "maxLength": 250
        },
        "registerProcessName": {
            "description": "Registered process name. This value for reference only, setting it does not persist the value.",
            "type": "string",
            "maxLength": 250
        },
        "updateTime": {
            "description": "Update time. This value for reference only, setting it does not persist the value.",
            "type": "string",
            "format": "date-time"
        },
        "updateAccountId": {
            "description": "Update account id. This value for reference only, setting it does not persist the value.",
            "type": "string",
            "maxLength": 250
        },
        "updateProcessName": {
            "description": "Update peocess name. This value for reference only, setting it does not persist the value.",
            "type": "string",
            "maxLength": 250
        }
    },
    "required": [
        "id",
        "jobdefId",
        "validityPeriod",
        "priority",
        "trigger",
        "version"
    ]
}